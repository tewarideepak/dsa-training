ðŸ”„ What is Copy Assignment Operator?

The copy assignment operator is used to copy the contents of one existing object into another existing object of the same class.

ClassName& operator=(const ClassName& other);

    ðŸ”§ Itâ€™s automatically provided by the compiler if you donâ€™t define it yourself.

ðŸ§± Syntax & Example

class Sample {
public:
    int* data;

    // Constructor
    Sample(int val) {
        data = new int(val);
    }

    // Copy Assignment Operator
    Sample& operator=(const Sample& other) {
        if (this != &other) { // Prevent self-assignment
            delete data; // Clean old data
            data = new int(*other.data); // Deep copy
        }
        return *this;
    }

    void show() {
        cout << "Value: " << *data << endl;
    }

    ~Sample() {
        delete data;
    }
};

int main() {
    Sample a(10);
    Sample b(20);
    b = a; // Copy assignment

    b.show(); // 10
}

ðŸ”‘ Key Concepts

| Concept                      | Explanation                                                           |
| ---------------------------- | --------------------------------------------------------------------- |
| ðŸ§  Used when                 | Assigning one object to another (`a = b;`)                            |
| ðŸ” Difference from Copy Ctor | Copy ctor: `Class b = a;` (initialization), Copy assignment: `b = a;` |
| ðŸ”„ Self-assignment check     | `if (this != &other)` avoids issues like deleting own memory          |
| ðŸ§¹ Delete old memory         | Prevent memory leaks (only needed for dynamic memory)                 |
| ðŸªª Return by reference       | Enables chaining like `a = b = c;`                                    |
| âš ï¸ Compiler-generated        | Performs **shallow copy** by default                                  |


ðŸ§ª Output Example with Deep Copy

Sample a(100);
Sample b(200);

b = a;       // calls copy assignment
*b.data = 300;

a.show();    // Output: 100 (unchanged)
b.show();    // Output: 300

âœ”ï¸ a and b are now independent.
âŒ Without Deep Copy (Default)

If you donâ€™t define the copy assignment operator:

    Shallow copy occurs.

    Both objects point to the same memory.

    Leads to double delete or unexpected modification.

âœ… Best Practices

    Always define a custom copy assignment operator if your class manages dynamic memory.

    Follow Rule of Three:

        Define:

            Destructor

            Copy Constructor

            Copy Assignment Operator

ðŸ§ª Memory Flow (Deep Copy)

Before:          a.data â†’ [100]    b.data â†’ [200]

After:  b = a;   a.data â†’ [100]    b.data â†’ [100 (copied)]


âœ”ï¸ Two different memory blocks with same value.